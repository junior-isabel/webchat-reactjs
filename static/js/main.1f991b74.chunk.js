(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},127:function(e,t,a){},151:function(e,t){},153:function(e,t){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},190:function(e,t){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),l=a.n(c),s=(a(102),a(18)),u=a(7),o=a(5),i=(a(103),a(104),a(86)),m=a.n(i),p=a(2),f=a.n(p),d=a(4),E=a(87),v=a.n(E).a.create({baseURL:"http://localhost:4000",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*",mode:"cors"}});function h(){var e=JSON.parse(localStorage.getItem("token"));return e?e.token:""}function b(e){localStorage.setItem("token",JSON.stringify(e))}function g(){return JSON.parse(localStorage.getItem("token-user"))}function O(){return(O=Object(d.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/auths",{username:t,password:a});case 3:return b((n=e.sent).data),e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),localStorage.removeItem("token"),e.abrupt("return",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(){return(y=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/accounts",t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(){return(N=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=h(),e.next=4,v.get("/profile-user",{headers:{Authorization:"Bearer ".concat(a)}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var j=a(3),S=function(e){var t=e.status,a=Object(n.useState)(""),c=Object(o.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)(""),p=Object(o.a)(i,2),f=p[0],d=p[1],E=Object(u.g)(),v=Object(j.c)((function(e){return e.socket}));return r.a.createElement("div",{className:["card-form-login",t?"active-login":""].join(" ")},r.a.createElement("form",{method:"POST",onSubmit:function(e){e.preventDefault(),function(e,t){return O.apply(this,arguments)}(l,f).then((function(e){e.token?function(){return N.apply(this,arguments)}().then((function(t){var a;t&&(v&&(a=t,localStorage.setItem("token-user",JSON.stringify(a)),v.emit("set token",e.token),setTimeout((function(){return E.push("/")}),200)))})):alert(e.data.message)})).catch((function(e){}))}},r.a.createElement("figure",null,r.a.createElement("img",{src:m.a,width:"80",alt:"logo"})),r.a.createElement("label",{htmlFor:""},r.a.createElement("input",{type:"text",name:"email",value:l,onChange:function(e){return s(e.target.value)},placeholder:"email",required:!0})),r.a.createElement("label",{htmlFor:""},r.a.createElement("input",{type:"password",name:"password",value:f,onChange:function(e){return d(e.target.value)},placeholder:"password",id:"",required:!0})),r.a.createElement("button",{type:"submit"},"login")))};a(127);function w(){return(w=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v.get("/cities").then((function(e){return e})).catch((function(e){throw new Error(e)})),e.next=4,t;case 4:return e.abrupt("return",e.sent.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0,data:[]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var T=function(e){var t=e.submit,a=e.statusForm,c=Object(n.useState)(""),l=Object(o.a)(c,2),s=l[0],u=l[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],f=m[1],d=Object(n.useState)(""),E=Object(o.a)(d,2),v=E[0],h=E[1],b=Object(n.useState)(""),g=Object(o.a)(b,2),O=g[0],y=g[1],N=Object(n.useState)(""),j=Object(o.a)(N,2),S=j[0],T=j[1],x=Object(n.useState)(""),k=Object(o.a)(x,2),C=k[0],A=k[1],I=Object(n.useState)(""),R=Object(o.a)(I,2),M=R[0],F=R[1],U=Object(n.useState)(""),z=Object(o.a)(U,2),L=z[0],G=z[1],D=Object(n.useState)(-1),_=Object(o.a)(D,2),q=_[0],B=_[1],P=Object(n.useState)([]),H=Object(o.a)(P,2),J=H[0],V=H[1];return Object(n.useEffect)((function(){200===a&&(u(""),f(""),h(""),y(""),T(""),A(""),F(""),G(""),B(-1),V([]))}),[a]),Object(n.useEffect)((function(){(function(){return w.apply(this,arguments)})().then((function(e){var t=e.error?[]:e;V(t)}))}),[]),r.a.createElement("form",{action:"",method:"POST",className:"card-signup-form",onSubmit:function(e){e.preventDefault(),-1!==q&&""!==s&&t({firstName:s,lastName:p,sexo:v,birthday:O,cityId:q,email:S,phone:C,password:M,repassword:L})}},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"firstName"},r.a.createElement("input",{type:"text",name:"firstName",value:s,onChange:function(e){return u(e.target.value)},placeholder:"Primeiro Nome"}))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"lastName"},r.a.createElement("input",{type:"text",name:"lastName",value:p,onChange:function(e){return f(e.target.value)},required:!0,placeholder:"\xfaltimo Nome"}))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"register-sexo"},"Sexo",r.a.createElement("select",{name:"sexo",id:"register-sexo",value:v,onChange:function(e){return h(e.target.value)}},r.a.createElement("option",{value:""},"nenhum"),r.a.createElement("option",{value:"m"},"Masculino"),r.a.createElement("option",{value:"f"},"Femenino")))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"birthday"},r.a.createElement("input",{type:"date",name:"birthday",value:O,onChange:function(e){return y(e.target.value)},id:"register-birthday"}))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"register-sexo"},"Cidade natal",r.a.createElement("select",{name:"cityId",id:"cities",value:q,onChange:function(e){return B(e.target.value)}},r.a.createElement("option",{value:""},"seleciona"),J.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"phone"},r.a.createElement("input",{type:"phone",value:C,onChange:function(e){return A(e.target.value)},name:"phone",placeholder:"N\xfamero de Telefone"}))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{type:"email",required:!0,value:S,onChange:function(e){return T(e.target.value)},name:"email",placeholder:"Seu Emal"}))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"register-password"},r.a.createElement("input",{type:"password",name:"passwrod",value:M,onChange:function(e){return F(e.target.value)},id:"register-password",placeholder:"palavra passe"}))),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"register-repassword"},r.a.createElement("input",{type:"password",name:"repasswrod",value:L,onChange:function(e){return G(e.target.value)},id:"register-repassword",placeholder:"re-introduzir palavra passe"}))),r.a.createElement("li",null,r.a.createElement("button",{type:"submit"},"cadastrar-se"))))},x=function(e){document.title="login - mubenq";var t=Object(n.useState)(0),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement("section",{className:"login-page"},r.a.createElement("header",null,r.a.createElement("div",{className:"description"},r.a.createElement("h1",null,"cadastra-se em MyChat"),r.a.createElement("p",null,"meu texto, \xe9 algo como fazer login no meu chat empresarial"),r.a.createElement(T,{submit:function(e){(function(e){return y.apply(this,arguments)})(e).then((function(e){alert("sua conta foi criada,  inicia a sua sess\xe3o em login"),l(e.status)}))},statusForm:c}))),r.a.createElement("div",{className:"form-absolute"},r.a.createElement(S,{status:c})))},k=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/register",component:x}))},C=a(93),A=a(39),I=a.n(A),R=a(207),M=a(215),F=a(219),U=(a(160),a(161),function(e){var t=e.user,a=e.handlerOpenMessage,n=g(),c=Object(j.c)((function(e){return e.alerts})),l=Object(j.c)((function(e){return e.chat.talks})).find((function(e){return e[function(e,t){if(e.userFrom===t.id)return"userTo";if(e.userTo===t.id)return"userFrom"}(e,n)]===t.id}));return r.a.createElement("section",{className:"message-user",onClick:a},r.a.createElement("figure",{className:"avatar"},r.a.createElement(F.a,null,r.a.createElement(R.a,{fontSize:"large"}))),r.a.createElement("div",{className:"message-user-content"},r.a.createElement("header",null,r.a.createElement("label",{className:"name"},t.firstName," ",c[l.id]&&c[l.id].counter>0?"(".concat(c[l.id].counter,")"):""),r.a.createElement("label",null,t.time)),r.a.createElement("div",{className:"text"})))}),z=(a(162),a(208)),L=(a(163),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l={"/":"Mensages","/findfriend":"Encontrar amigos","/accept-request":"Aceita Contactos","/logout":"Sair"};return r.a.createElement("nav",{className:"app-navbar"},r.a.createElement("span",{className:"icone-menu",onClick:function(){c(!a)}},r.a.createElement(z.a,{fontSize:"large",color:"primary"})),r.a.createElement("section",{className:"navbar-links ".concat(a?"active":"")},r.a.createElement("ul",{className:"list-links"},Object.keys(l).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(s.b,{to:e},l[e]))})))))}),G=function(e){var t=e.children;return r.a.createElement("div",{className:"layout"},r.a.createElement(L,null),r.a.createElement("div",{className:"layout-container"},t))},D=a(209),_=a(210),q=a(211),B=(a(164),function(e){var t=e.user,a=e.handlerCallUser;return r.a.createElement("header",{className:"app-header content-header nav-height ".concat(t?"":"hide")},r.a.createElement("span",{className:"user-active"},t.firstName," ",t.lastName),r.a.createElement("div",{className:"content-header-setting"},r.a.createElement("button",{className:"btn-link",onClick:function(){return a(t)}},r.a.createElement(D.a,null)),r.a.createElement("button",{className:"btn-link"},r.a.createElement(_.a,null)),r.a.createElement("button",{className:"btn-link"},r.a.createElement(q.a,null))))}),P=(a(165),a(166),function(e){var t=e.message,a=e.profile;return r.a.createElement("section",{className:["message-context",t.User.id===a.id?"my-message":""].join(" ")},r.a.createElement("div",{className:"avatar","data-username":"".concat(t.User.firstName," ").concat(t.User.lastName)},r.a.createElement(F.a,{fontSize:"large",className:["avatar-title",t.User.id===a.id?"user":""].join(" ")},t.User.firstName[0],t.User.lastName[0])),r.a.createElement("div",{className:"message-context-text"},"hipertext"===t.type&&r.a.createElement("a",{href:t.urlImage,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:"#","data-image":t.urlImage,width:"100%",height:"100%",className:"lazyload",style:{maxWidth:"400px",maxHeight:"500px"},alt:t.urlImage,onError:function(e){var t=Array.from(document.querySelectorAll(".message-context .message-context-text .lazyload"));t.length&&(t[t.length-1].src=t[t.length-1].dataset.image),document.querySelector(".card-list-message-scroll-down").onscroll=function(e){var t=document.querySelectorAll(".message-context .message-context-text .lazyload"),a=e.target.getBoundingClientRect(),n=a.top,r=a.height;Array.from(t).forEach((function(e){var t=e.getBoundingClientRect(),a=t.top,c=t.height;n<a&&n+r>a+c&&e.classList.contains("lazyload")&&(e.src=e.dataset.image,setTimeout((function(){e.classList.remove("lazyload")}),800))}))}}})),r.a.createElement("div",{className:"message-context-text.msg"},r.a.createElement("p",{className:"text"},t.text)),r.a.createElement("p",{className:"details"},r.a.createElement("b",null,t.updatedAt.split("T")[0]),r.a.createElement("b",null,t.updatedAt.split("T")[1].split(".")[0]))),r.a.createElement("div",{className:"metadata"},t.time))}),H=function(e){var t=e.inbox.messages||[],a=g();return Object(n.useEffect)((function(){var e=setTimeout((function(){var e=document.querySelector(".card-list-message-scroll-down"),t=e.scrollHeight;e.scrollTo(0,t+e.scrollTop)}),200);return function(){return clearTimeout(e)}}),[t]),r.a.createElement("section",{className:"card-list-message card-list-message-scroll-down"},r.a.createElement("ul",{className:"list-message"},t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(P,{message:e,profile:a}))}))))},J=a(212),V=a(213),K=a(214);a(167);function W(){return(W=Object(d.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h(),e.next=4,v.get("/messages/"+t,{headers:{Authorization:"Bearer ".concat(n)}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Q(){return(Q=Object(d.a)(f.a.mark((function e(t,a,n,r){var c,l,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=h(),(s=new FormData).append("text",a),s.append("type",r),s.append("image",n),e.next=8,v.post("/messages/send/"+t,s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(l)}});case 8:return c=e.sent,e.abrupt("return",c.data);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var X=function(e){var t=e.userId,a=e.meId,c=Object(n.useState)(""),l=Object(o.a)(c,2),s=l[0],u=l[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],f=m[1],d=Object(n.useState)(""),E=Object(o.a)(d,2),v=E[0],h=E[1],b=Object(j.c)((function(e){return e.socket}));function g(){(s||p)&&(s.length>5e3||function(e,t,a,n){return Q.apply(this,arguments)}(t,s,p,p?"hipertext":"").then((function(e){u(""),b.emit("new-message",{userId:t,meId:a,message:s,image:e.urlImage,type:p?"hipertext":""}),h(""),f(""),setTimeout((function(){var e=document.querySelector(".card-list-message-scroll-down"),t=e&&e.scrollHeight||0;e&&e.scrollTo(0,t+e.scrollTop)}),100)})))}return r.a.createElement("div",{className:"input-message"},r.a.createElement("label",{htmlFor:"file-image",className:"file-message",title:"adicionar imagem"},r.a.createElement(J.a,null),r.a.createElement("input",{type:"file",id:"file-image",accept:"image/*",onChange:function(e){e.preventDefault(),f(e.target.files[0]),h(URL.createObjectURL(e.target.files[0]))}})),r.a.createElement("label",{className:"input-text"},r.a.createElement("input",{type:"text",onKeyDown:function(e){13===e.keyCode&&g()},value:s,onChange:function(e){return u(e.target.value)},placeholder:"text message..."})),r.a.createElement("span",{onClick:g,title:"enviar"},r.a.createElement(V.a,null)),v&&r.a.createElement("div",{className:"previewImage"},r.a.createElement(K.a,{onClick:function(){f(""),h("")},className:"close-button"}),r.a.createElement("img",{src:v,alt:"preview-file",width:"100%",height:"100%"})))};function Y(){return(Y=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=h(),e.next=4,v.get("/users/friends",{headers:{Authorization:"Bearer ".concat(a)}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Z=a(11),$={friends:[]};var ee={};var te=a(19),ae={};var ne={};var re="SET MESSAGE ACTIVE USER",ce="RESET MESSAGE ACTIVE USER",le="ADD MESSAGE",se="SET MESSAGE",ue="INCREMENT COUNTER MESSAGE",oe="RESET COUNTER MESSAGE",ie="CALL_SET_STATUS",me="CALL_RESET",pe="SET_STREAM",fe="SET_PEER",de=function(){document.title="chat - mubenq";var e=g(),t=Object(j.c)((function(e){return e.chat.friends})),a=Object(j.c)((function(e){return e.chat.talks})),c=Object(j.c)((function(e){return e.messages})),l=Object(j.c)((function(e){return e.talk})),u=Object(j.c)((function(e){return e.messages[l.id]}))||[],o=Object(n.useRef)(),i=Object(j.b)();Object(n.useEffect)((function(){t.length||function(){return Y.apply(this,arguments)}().then((function(e){i({type:"SET FRIEND CHAT",payload:e})}))}),[t.length,i]),Object(n.useEffect)((function(){void 0===l.id||c[l.id]||function(e){return W.apply(this,arguments)}(l.id).then((function(e){i({type:se,payload:{talkId:l.id,messages:e}})}))}),[l,i]),Object(n.useEffect)((function(){return function(){return i({type:ce})}}),[i]);var m=function(){var t=Object(d.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:n=t.sent,o.current=new I.a({initiator:!0,trickle:!1,stream:n}),i({type:pe,payload:n}),i({type:fe,payload:o}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("n\xe3o foi possivel connectar-se com a sua webcam");case 12:i({type:ie,payload:{to:a,from:e.id}});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();function p(e,t){return l.userFrom===t.id?l.userTo:l.userTo===t.id?l.userFrom:void 0}return r.a.createElement(G,null,r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("aside",{className:"column tabnav painel-message"},r.a.createElement("div",{className:"userInfo"},r.a.createElement(F.a,null,r.a.createElement(R.a,{fontSize:"large"})),r.a.createElement("label",null," ","".concat(e.firstName," ").concat(e.lastName))),r.a.createElement("form",{className:"form-search",action:""},r.a.createElement("label",null,r.a.createElement("input",{type:"text",placeholder:"search",disabled:!0}),r.a.createElement(M.a,null))),r.a.createElement("ul",{className:"message-friends"},t&&t.map((function(t){return r.a.createElement("li",{key:t.id,className:t.id===p(0,e)?"active":""},r.a.createElement(U,{user:t,handlerOpenMessage:function(){return function(e){var t=a.find((function(t){return t.userFrom===e.id||t.userTo===e.id}));i({type:re,payload:t}),i({type:oe,payload:{id:t.id}})}(t)}}))}))),r.a.createElement("footer",null,r.a.createElement(s.b,{to:"/findfriend"},"encontre amigos"))),r.a.createElement("section",{className:"column content"},r.a.createElement(B,{user:void 0!==l.id&&t.filter((function(t){return t.id===p(0,e)}))[0],handlerCallUser:m}),void 0!==l.id&&r.a.createElement(H,{inbox:u}),r.a.createElement("footer",null,r.a.createElement(X,{userId:p(0,e),meId:e.id})))))))},Ee=a(216);function ve(){return he.apply(this,arguments)}function he(){return(he=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=h(),e.next=4,v.get("/peoples",{headers:{Authorization:"Bearer ".concat(a)}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function be(){return(be=Object(d.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h(),e.next=4,v.post("/find-friend/".concat(t),{},{headers:{Authorization:"Bearer ".concat(n)}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ge(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=h(),e.next=4,v.get("/find-friend/solicities",{headers:{Authorization:"Bearer ".concat(a)}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ye(){return(ye=Object(d.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h(),e.next=4,v.put("/find-friend/".concat(t),{},{headers:{Authorization:"Bearer ".concat(n)}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}a(168);var Ne,je=function(){document.title="Encontrar amigos";var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];function l(e){(function(e){return be.apply(this,arguments)})(e).then((function(t){var n=a.filter((function(t){return t.id!==e}));c(n)}))}return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve();case 3:t=e.sent,c(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(G,null,r.a.createElement("div",{className:"find-friend"},r.a.createElement("section",{className:"result-search-people"},r.a.createElement("ul",{className:"list-people"},a.length?a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"list-people-avatar"},r.a.createElement(Ee.a,null)),r.a.createElement("div",{className:"list-people-user-info"},r.a.createElement("h5",null,"".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("button",{onClick:function(){return l(e.id)}},"solicitar amizade")))})):r.a.createElement("p",null,"lista usuario vazia para si...")))))},Se=a(217),we=(a(169),function(){return r.a.createElement("div",{className:"valide-account-page"},r.a.createElement("h1",null,"Valide a sua conta"),r.a.createElement("p",null,"abre o seu email e digita o c\xf3digo de valida\xe7\xe3o de 6 digitos..."),r.a.createElement("div",{className:"group-digit-input-form"},r.a.createElement("form",{action:"",className:"validate-account-form"},r.a.createElement("input",{type:"text",maxLength:"1",autoComplete:!1}),r.a.createElement("input",{type:"text",maxLength:"1","validate-account-form":!0}),r.a.createElement("input",{type:"text",maxLength:"1","validate-account-form":!0}),r.a.createElement("input",{type:"text",maxLength:"1","validate-account-form":!0}),r.a.createElement("input",{type:"text",maxLength:"1","validate-account-form":!0}),r.a.createElement("input",{type:"text",maxLength:"1","validate-account-form":!0}),r.a.createElement("button",{type:"submit"},"enviar"),r.a.createElement(Se.a,{fontSize:"large"}))))}),Te=function(){var e=Object(j.b)();return Object(n.useEffect)((function(){e({type:"RESET CHAT"}),e({type:"RESET MESSAGE ALERT"}),e({type:"RESET NOTIFICATION MESSAGE"})})),localStorage.clear(),r.a.createElement(u.a,{to:{pathname:"/register"}})},xe=(a(170),function(){document.title="Encontrar amigos";var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];function l(e){(function(e){return ye.apply(this,arguments)})(e).then((function(t){var n=a.filter((function(t){return t.id!==e}));c(n)}))}return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge();case 3:t=e.sent,c(t.friends),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(G,null,r.a.createElement("div",{className:"find-friend"},r.a.createElement("section",{className:"result-search-people"},r.a.createElement("ul",{className:"list-people"},a.length?a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"list-people-avatar"},r.a.createElement(Ee.a,null)),r.a.createElement("div",{className:"list-people-user-info"},r.a.createElement("h5",null,"".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("button",{onClick:function(){return l(e.id)}},"aceita solicita\xe7\xe3o")))})):r.a.createElement("p",null,"n\xe3o existe pedido para aceitar...")))))}),ke=function(e){var t=e.children,a=Object(C.a)(e,["children"]),n=localStorage.getItem("token")||null,c=n?JSON.parse(n):null;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){var a=e.location;return c?t:r.a.createElement(u.a,{to:{pathname:"/logout",state:{from:a}}})}}))},Ce=function(){return r.a.createElement(u.d,null,r.a.createElement(ke,{path:"/",exact:!0},r.a.createElement(de,null)),r.a.createElement(ke,{path:"/findfriend"},r.a.createElement(je,null)),r.a.createElement(ke,{path:"/validateaccount"},r.a.createElement(we,null)),r.a.createElement(ke,{path:"/accept-request"},r.a.createElement(xe,null)),r.a.createElement(u.b,{path:"/logout",component:Te}))},Ae=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null),r.a.createElement(k,null))},Ie=a(92),Re=a.n(Ie);a(193);function Me(){var e=Object(j.c)((function(e){return e.call})),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(j.b)(),l=Object(j.c)((function(e){return e.peer})),s=Object(j.c)((function(e){return e.stream})),u=Object(j.c)((function(e){return e.socket})),o=function(){if("call user"===e.status)return{firstName:e.to.firstName,lastName:e.to.lastName};if("call accept"===e.status)return{firstName:e.from.profile.firstName,lastName:e.from.profile.lastName};return{firstName:"",lastName:""}}();return Object(n.useEffect)((function(){t.current&&(t.current.srcObject=s),l.current.on("stream",(function(e){a.current.srcObject=e})),l.current.on("close",(function(){c({type:me}),s.getTracks().forEach((function(e){return s.removeTrack(e)}))}))}),[t,s,l]),Object(n.useEffect)((function(){"call user"===e.status?(l.current.on("signal",(function(t){setTimeout((function(){u.emit("call-video-to",{offer:t,to:e.to.id,from:e.from})}),1e3)})),u.on("connection of contact",(function(e){c({type:ie,payload:{socketTo:e}})})),u.on("call-video-in-action",(function(e){})),u.on("call-video-accept",(function(e){l.current.signal(e.answer)}))):"call accept"===e.status&&(l.current.on("signal",(function(t){setTimeout((function(){u.emit("call-video-accept",{answer:t,socket:e.from.socket})}))})),l.current.signal(e.from.offer))}),[]),Object(n.useEffect)((function(){u.on("call-video-in-action-close",(function(e){c({type:me})}))}),[]),r.a.createElement("div",{className:"call-modal"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("p",null,e.status," ",o.firstName," ",o.lastName),r.a.createElement("video",{className:"call-modal-video remote-video",width:"500",height:"500",ref:a,autoPlay:!0}),r.a.createElement("video",{className:"call-modal-video local-video",autoPlay:!0,ref:t,width:"150",height:"150"}),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:"terminate-call",onClick:function(){var t;switch(e.status){case"call user":t=e.socketTo;break;case"call accept":t=e.from.socket}l.current&&(l.current.destroy(),u.emit("call-video-in-action-close",{socket:t}))}},"terminar a chamada"))))}var Fe=a(218),Ue=(a(194),function(){var e=Object(j.c)((function(e){return e.call})).from.profile,t=Object(j.b)(),a=Object(n.useRef)();function c(){return(c=Object(d.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:n=e.sent,a.current=new I.a({initiator:!1,trickle:!1,stream:n}),t({type:pe,payload:n}),t({type:fe,payload:a}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:t({type:ie,payload:{status:"call accept"}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"receive-call-video"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("h3",null,"Call Receive..."),r.a.createElement("h5",null,"".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("button",{className:"btn-link",onClick:function(){return function(){return c.apply(this,arguments)}(e)}},r.a.createElement(Fe.a,{fontSize:"large"}))))});var ze=function(){var e,t=Object(j.b)(),a=Object(j.c)((function(e){return e.call})),c=h(),l=Object(n.useRef)();switch(Object(n.useEffect)((function(){l.current=(Ne||(Ne=Re()("http://localhost:4000")),Ne),t({type:"CONNECTION",payload:l.current}),c||window.localStorage.clear(),l.current.on("connect",(function(){l.current.emit("set-token",c)})),l.current.on("call-video-in-action-close",(function(){t({type:me})}))}),[]),Object(n.useEffect)((function(){l.current.off("call-video-from"),l.current.on("call-video-from",(function(e){a.status||t({type:ie,payload:{status:"receive call",from:e}})}))}),[a]),Object(n.useEffect)((function(){l.current&&(l.current.off("new-message"),l.current.on("new-message",(function(e){t({type:le,payload:{userId:e.talkId,message:e}}),t({type:ue,payload:{id:e.talkId,message:e}})})))}),[l]),Object(n.useEffect)((function(){l.current.off("save-message"),l.current.on("save-message",(function(e){t({type:le,payload:{userId:e.talkId,message:e}})}))}),[l]),a.status){case"call user":case"call accept":e=r.a.createElement(Me,null);break;case"receive call":e=r.a.createElement(Ue,null);break;default:e=r.a.createElement(r.a.Fragment,null)}return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,e,r.a.createElement(Ae,null)))},Le=a(31),Ge=Object(Le.b)({socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECTION":return t.payload;case"DISCONNECT":case"RESET CONNECTION":return null;default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET FRIEND CHAT":return Object.assign({},e,Object(Z.a)({},t.payload));case"RESET CHAT":return $;default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"SET MESSAGE":return Object.assign({},e,Object(te.a)({},a.talkId,{messages:a.messages}));case"ADD MESSAGE":return e[a.userId]?Object.assign({},e,Object(te.a)({},a.userId,Object.assign({},e[a.userId],{messages:e[a.userId].messages.concat(a.message)}))):e;case"RESET MESSAGE ALERT":return ae;default:return e}},alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"COUNTER MESSAGE":return Object.assign({},e,Object(te.a)({},a.id,{counter:1}));case"INCREMENT COUNTER MESSAGE":return e[a.userId]?Object.assign({},e,Object(te.a)({},a.id,{counter:e[a.userId].counter+1})):Object.assign({},e,Object(te.a)({},a.id,{counter:1}));case"RESET COUNTER MESSAGE":return Object.assign({},e,Object(te.a)({},a.id,{counter:0}));case"RESET NOTIFICATION MESSAGE":return ne;default:return e}},talk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET MESSAGE ACTIVE USER":return Object(Z.a)(Object(Z.a)({},e),n);case"RESET MESSAGE ACTIVE USER":return ee;default:return e}},call:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"",to:null,from:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALL_SET_STATUS":return Object(Z.a)(Object(Z.a)({},e),{},{status:"call user"},t.payload);case"CALL_RESET":return Object(Z.a)(Object(Z.a)({},e),{},{status:"",to:null,from:null});case"STATUS_SET_SOCKETTO":return Object(Z.a)(Object(Z.a)({},e),{},{socketTo:t.payload});default:return e}},stream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STREAM":return t.payload;default:return e}},peer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PEER":return t.payload;default:return e}},me:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{socket:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PEER":return Object(Z.a)(Object(Z.a)({},e),{},{socket:t.payload});default:return e}}}),De=Object(Le.c)(Ge);window.store=De;var _e=De;l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j.a,{store:_e},r.a.createElement(ze,null))),document.getElementById("root"))},86:function(e,t,a){e.exports=a.p+"static/media/logo.9235a458.png"},97:function(e,t,a){e.exports=a(195)}},[[97,1,2]]]);
//# sourceMappingURL=main.1f991b74.chunk.js.map